# vim: ft=zsh

# export ANTIGEN_LOG=~/antigen-log
export HYPHEN_INSENSITIVE="true"
export COMPLETION_WAITING_DOTS="true"
export DISABLE_UNTRACKED_FILES_DIRTY="true"
export DISABLE_MAGIC_FUNCTIONS="true"

export NVM_DIR="$HOME/.local/share/nvm"
# export NVM_LAZY_LOAD=true
export NVM_COMPLETION=true

export MODE_CURSOR_VIINS="blinking bar"
export MODE_CURSOR_REPLACE="orange block"
export MODE_CURSOR_VICMD="orange block"
export MODE_CURSOR_SEARCH="orange steady underline"
export MODE_CURSOR_VISUAL="orange steady block"
export MODE_CURSOR_VLINE="orange steady block"

export FZF_PATH="$HOME/.local/share/fzf"

zstyle ':prezto:module:syntax-highlighting' color 'yes'
zstyle ':prezto:module:autosuggestions' color 'yes'

antigen use prezto

antigen bundle sorin-ionescu/prezto modules/environment
antigen bundle sorin-ionescu/prezto modules/helper

antigen bundle sorin-ionescu/prezto modules/syntax-highlighting
antigen bundle sorin-ionescu/prezto modules/autosuggestions

#antigen bundle sorin-ionescu/prezto modules/command-not-found
antigen bundle sorin-ionescu/prezto modules/directory
antigen bundle sorin-ionescu/prezto modules/editor
#antigen bundle sorin-ionescu/prezto modules/git
antigen bundle sorin-ionescu/prezto modules/history
antigen bundle sorin-ionescu/prezto modules/prompt
antigen bundle sorin-ionescu/prezto modules/tmux
antigen bundle sorin-ionescu/prezto modules/utility

antigen bundle ohmyzsh/ohmyzsh plugins/wd
antigen bundle ohmyzsh/ohmyzsh plugins/systemd
antigen bundle ohmyzsh/ohmyzsh plugins/git
antigen bundle ohmyzsh/ohmyzsh plugins/git-extras
antigen bundle ohmyzsh/ohmyzsh plugins/git-lfs

antigen bundle softmoth/zsh-vim-mode@main
antigen bundle djui/alias-tips
antigen bundle lukechilds/zsh-nvm
antigen bundle unixorn/fzf-zsh-plugin@main
antigen bundle qoomon/zsh-lazyload

antigen bundle sorin-ionescu/prezto modules/completion

antigen apply

# set prompt
PS1='%{%F{green}%}%n%{%F{magenta}%}@%{%F{cyan}%}%m %{%F{blue}%}%1~$ %{%f%}'
RPS1="%(?..%{%B%F{red}%}%? â†µ%f%b%})"

bindkey -M viins '^[[A' up-line-or-history
bindkey -M viins '^[[B' down-line-or-history
bindkey -M viins '^[OA' up-line-or-history
bindkey -M viins '^[OB' down-line-or-history
bindkey -M vicmd '^[[A' up-line-or-history
bindkey -M vicmd '^[[B' down-line-or-history
bindkey -M vicmd '^[OA' up-line-or-history
bindkey -M vicmd '^[OB' down-line-or-history
bindkey -M vicmd 'k' up-line-or-history
bindkey -M vicmd 'j' down-line-or-history

setopt correct

# lazy load heavy apps
_load_conda() {
    export CONDA_ROOT="$HOME/.miniconda3"
   _conda_setup="$('$CONDA_ROOT/bin/conda' 'shell.zsh' 'hook' 2> /dev/null)"
   [ $? -eq 0 ] && eval "$_conda_setup" || [ -f "$CONDA_ROOT/etc/profile.d/conda.sh" ] && . "$CONDA_ROOT/etc/profile.d/conda.sh"
}
lazyload conda -- "_load_conda"
lazyload ghc -- "[ -f \"$HOME/.ghcup/env\" ] && source \"$HOME/.ghcup/env\""
lazyload ros2 rviz2 rqt -- "source /opt/ros/rolling/setup.zsh"

# Path appends
export FLYCTL_INSTALL="/home/doctorwho/.fly"
export PATH="$PATH:$HOME/.local/share/go/bin:$HOME/.local/bin:$FLYCTL_INSTALL/bin:/home/doctorwho/.local/share/spicetify:/opt/gradle/gradle-8.2.1/bin"

# Other env variables
export EDITOR=nvim
export GOPATH=~/.local/share/go
# needed for ignition gazebo
export IGN_IP=127.0.0.1

# shell helpers
function mkcd {
  mkdir -p $@ && cd ${@:$#}
}

# aliases
alias sl=exa
