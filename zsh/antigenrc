# vim: ft=zsh

# export ANTIGEN_LOG=~/antigen-log
export HYPHEN_INSENSITIVE="true"
export COMPLETION_WAITING_DOTS="true"
export DISABLE_UNTRACKED_FILES_DIRTY="true"
export DISABLE_MAGIC_FUNCTIONS="true"

export NVM_DIR="$HOME/.local/share/nvm"
export NVM_LAZY_LOAD=true
export NVM_COMPLETION=true

export MODE_CURSOR_VIINS="blinking bar"
export MODE_CURSOR_REPLACE="orange block"
export MODE_CURSOR_VICMD="orange block"
export MODE_CURSOR_SEARCH="orange steady underline"
export MODE_CURSOR_VISUAL="orange steady block"
export MODE_CURSOR_VLINE="orange steady block"

export FZF_PATH="$HOME/.local/share/fzf"

antigen use oh-my-zsh

antigen bundles << EOBUNDLES
    zsh-users/zsh-completions
    zsh-users/zsh-autosuggestions
    zsh-users/zsh-syntax-highlighting
    softmoth/zsh-vim-mode@main
    command-not-found
    thefuck
    wd

    docker
    docker-compose
    systemd
    lukechilds/zsh-nvm
    git
    git-extras
    git-lfs

    ubuntu
    djui/alias-tips
    unixorn/fzf-zsh-plugin@main

    qoomon/zsh-lazyload
EOBUNDLES

antigen theme mytheme

antigen apply

bindkey -M viins '^[[A' up-line-or-history
bindkey -M viins '^[[B' down-line-or-history
bindkey -M viins '^[OA' up-line-or-history
bindkey -M viins '^[OB' down-line-or-history
bindkey -M vicmd '^[[A' up-line-or-history
bindkey -M vicmd '^[[B' down-line-or-history
bindkey -M vicmd '^[OA' up-line-or-history
bindkey -M vicmd '^[OB' down-line-or-history
bindkey -M vicmd 'k' up-line-or-history
bindkey -M vicmd 'j' down-line-or-history

setopt correct

# lazy load heavy apps
_load_conda() {
    export CONDA_ROOT="$HOME/.miniconda3"
   _conda_setup="$('$CONDA_ROOT/bin/conda' 'shell.zsh' 'hook' 2> /dev/null)"
   [ $? -eq 0 ] && eval "$_conda_setup" || [ -f "$CONDA_ROOT/etc/profile.d/conda.sh" ] && . "$CONDA_ROOT/etc/profile.d/conda.sh"
}
lazyload conda -- "_load_conda"
lazyload ghc -- "[ -f \"$HOME/.ghcup/env\" ] && source \"$HOME/.ghcup/env\""
lazyload ros2 rviz2 rqt -- "source /opt/ros/rolling/setup.zsh"

# Path appends
export FLYCTL_INSTALL="/home/doctorwho/.fly"
export PATH="$PATH:$HOME/.local/share/go/bin:$HOME/.local/bin:$FLYCTL_INSTALL/bin"

# Other env variables
export EDITOR=lvim
export GOPATH=~/.local/share/go
# needed for ignition gazebo
export IGN_IP=127.0.0.1

# aliases
alias wezterm="__EGL_VENDOR_LIBRARY_FILENAMES=/usr/share/glvnd/egl_vendor.d/50_mesa.json wezterm"
alias ls=exa

